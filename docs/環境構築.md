## 目的
- 最小構成で Express + TypeScript の「Hello World」を起動する。
- 迷わないように、新規ディレクトリで一発導入（既存ファイルの衝突回避）。

## 最短: CLI一括スキャフォールド（推奨）
- 目的: ワンライナーで雛形と開発サーバを即用意。
- 注意: 既存の作業ディレクトリと衝突しないよう、新しいディレクトリ名（例: `my-app`）で実行。

### TypeScript（コミュニティテンプレ）
```bash
npx -y express-generator-typescript my-app && cd my-app && npm install && npm run dev
```
- リンク: `https://www.npmjs.com/package/express-generator-typescript`

### JavaScript（公式）
```bash
npx -y express-generator my-app && cd my-app && npm install && npm start
```
- 公式: `https://expressjs.com/ja/starter/generator.html`

※ VS Code 拡張での「公式一括スキャフォールド」は基本ありません。CLIが最速・安定です。

## 事前確認（なぜ: Node LTSで動作差異を避けるため）
```bash
node -v          # v20.x などの LTS を推奨
node -p "process.release.lts"  # LTS名が出ればLTS
```

## 手動（tsx）最小構成で作る場合
1) ディレクトリ作成（なぜ: 既存と混ざらないようにするため）
```bash
mkdir my-express-ts && cd my-express-ts
```

2) 初期化（なぜ: npm プロジェクトとして管理するため）
```bash
npm init -y
```

3) 依存インストール（なぜ: Express本体＋型定義、tsxでTSを即実行）
```bash
npm i express
npm i -D typescript tsx @types/node @types/express
```

4) スクリプト設定（なぜ: `npm run dev` で即起動できるようにする）
`package.json` の `scripts` を以下に差し替え/追加
```json
{
  "scripts": {
    "dev": "tsx src/index.ts"
  }
}
```

5) アプリ作成（なぜ: Hello World のエンドポイントを用意）
```bash
mkdir -p src
cat > src/index.ts << 'EOF'
import express from 'express';

const app = express();

app.get('/', (_req, res) => {
  res.send('Hello World!');
});

const port = Number(process.env.PORT) || 3000;
app.listen(port, () => {
  console.log(`Server running on http://localhost:${port}`);
});
EOF
```

6) 起動（なぜ: 動作確認）
```bash
npm run dev
# 出力例: Server running on http://localhost:3000
```
ブラウザで `http://localhost:3000` を開く（"Hello World!" と表示されれば成功）。

## 任意（なぜ: 将来的にビルドして配布したい場合）
TypeScriptの最小設定とビルド/本番実行スクリプトを足す。
```bash
cat > tsconfig.json << 'EOF'
{
  "compilerOptions": {
    "target": "ES2020",
    "lib": ["ES2020"],
    "module": "CommonJS",
    "outDir": "dist",
    "esModuleInterop": true,
    "strict": true,
    "skipLibCheck": true
  },
  "include": ["src"]
}
EOF
```
`package.json` に追記
```json
{
  "scripts": {
    "build": "tsc -p tsconfig.json",
    "start": "node dist/index.js"
  }
}
```
使い方
```bash
npm run build
npm start
```

## 補足（.gitignore）（なぜ: 不要ファイルをGitに含めない）
```bash
printf "node_modules\n.DS_Store\ndist\n.env\n" > .gitignore
```

## 公式ドキュメント
- TypeScript tsconfig: `https://www.typescriptlang.org/tsconfig`
- Express Hello world: `https://expressjs.com/ja/starter/hello-world.html`
- tsx（TypeScript実行ツール）: `https://github.com/esbuild-kit/tsx`


